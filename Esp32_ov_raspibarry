import socket

# Caminho da imagem armazenada no Raspberry Pi
IMAGE_PATH = '/home/ecoflight/Documentos/EcoFlight/Projeto_EcoFlight/oip_comp.jpg'

# IP e porta do notebook (servidor)
NOTEBOOK_IP = '192.168.137.1'  # Substitua pelo IP do notebook
NOTEBOOK_PORT = 8080  # Porta que o servidor do notebook está escutando

# Função para ler e enviar a imagem armazenada
def send_image():
    # Abre o arquivo da imagem armazenada
    with open(IMAGE_PATH, 'rb') as image_file:
        # Conectando ao notebook
        client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        client_socket.connect((NOTEBOOK_IP, NOTEBOOK_PORT))
        
        # Envia a imagem em pacotes de 1024 bytes
        while True:
            chunk = image_file.read(1024)  # Lê 1024 bytes por vez
            if not chunk:
                break  # Sai do loop se não houver mais dados
            client_socket.send(chunk)

        # Finaliza a transmissão
        client_socket.close()
        print("Imagem enviada com sucesso!")

# Envia a imagem apenas uma vez
send_image()
